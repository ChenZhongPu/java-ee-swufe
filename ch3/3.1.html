<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Servlet: From Birth To Death - Head First Java Web</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../preface.html">Preface</a></li><li class="chapter-item expanded "><a href="../ch1/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch1/1.1.html"><strong aria-hidden="true">1.1.</strong> Jakarta EE Overview</a></li><li class="chapter-item expanded "><a href="../ch1/1.2.html"><strong aria-hidden="true">1.2.</strong> Your First Java Web Project</a></li><li class="chapter-item expanded "><a href="../ch1/1.3.html"><strong aria-hidden="true">1.3.</strong> A Brief Introduction To HTML</a></li><li class="chapter-item expanded "><a href="../ch1/1.4.html"><strong aria-hidden="true">1.4.</strong> A Brief Introduction To HTTP</a></li><li class="chapter-item expanded "><a href="../ch1/1.5.html"><strong aria-hidden="true">1.5.</strong> Revisit The First Java Web Project</a></li><li class="chapter-item expanded "><a href="../ch1/exercise.html"><strong aria-hidden="true">1.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch2/index.html"><strong aria-hidden="true">2.</strong> Web App Architecture And Mini MVC</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch2/2.1.html"><strong aria-hidden="true">2.1.</strong> Servlet And Container</a></li><li class="chapter-item expanded "><a href="../ch2/2.2.html"><strong aria-hidden="true">2.2.</strong> Search: The Way To Self-learning</a></li><li class="chapter-item expanded "><a href="../ch2/2.3.html"><strong aria-hidden="true">2.3.</strong> A Brief Introduction To MVC</a></li><li class="chapter-item expanded "><a href="../ch2/2.4.html"><strong aria-hidden="true">2.4.</strong> Hands On MVC (1)</a></li><li class="chapter-item expanded "><a href="../ch2/2.5.html"><strong aria-hidden="true">2.5.</strong> Hands on MVC (2)</a></li><li class="chapter-item expanded "><a href="../ch2/exercise.html"><strong aria-hidden="true">2.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch3/index.html"><strong aria-hidden="true">3.</strong> In-depth Servlet</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch3/3.1.html" class="active"><strong aria-hidden="true">3.1.</strong> Servlet: From Birth To Death</a></li><li class="chapter-item expanded "><a href="../ch3/3.2.html"><strong aria-hidden="true">3.2.</strong> Request And Response</a></li><li class="chapter-item expanded "><a href="../ch3/3.3.html"><strong aria-hidden="true">3.3.</strong> More About Request</a></li><li class="chapter-item expanded "><a href="../ch3/3.4.html"><strong aria-hidden="true">3.4.</strong> Upload Files In Servlets</a></li><li class="chapter-item expanded "><a href="../ch3/3.5.html"><strong aria-hidden="true">3.5.</strong> More About Response (1)</a></li><li class="chapter-item expanded "><a href="../ch3/3.6.html"><strong aria-hidden="true">3.6.</strong> More About Response (2)</a></li><li class="chapter-item expanded "><a href="../ch3/exercise.html"><strong aria-hidden="true">3.7.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch4/index.html"><strong aria-hidden="true">4.</strong> In-depth Web</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch4/4.1.html"><strong aria-hidden="true">4.1.</strong> Init parameters</a></li><li class="chapter-item expanded "><a href="../ch4/4.2.html"><strong aria-hidden="true">4.2.</strong> Attributes</a></li><li class="chapter-item expanded "><a href="../ch4/4.3.html"><strong aria-hidden="true">4.3.</strong> Session Management (1)</a></li><li class="chapter-item expanded "><a href="../ch4/4.4.html"><strong aria-hidden="true">4.4.</strong> Session Management (2)</a></li><li class="chapter-item expanded "><a href="../ch4/exercise.html"><strong aria-hidden="true">4.5.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch5/index.html"><strong aria-hidden="true">5.</strong> JSP And Scriptless JSP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch5/5.1.html"><strong aria-hidden="true">5.1.</strong> Facts About JSP</a></li><li class="chapter-item expanded "><a href="../ch5/5.2.html"><strong aria-hidden="true">5.2.</strong> Expression Language</a></li><li class="chapter-item expanded "><a href="../ch5/5.3.html"><strong aria-hidden="true">5.3.</strong> JSTL</a></li><li class="chapter-item expanded "><a href="../ch5/exercise.html"><strong aria-hidden="true">5.4.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch6/index.html"><strong aria-hidden="true">6.</strong> Database</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch6/6.1.html"><strong aria-hidden="true">6.1.</strong> Introduction To Database</a></li><li class="chapter-item expanded "><a href="../ch6/6.2.html"><strong aria-hidden="true">6.2.</strong> SQL (1)</a></li><li class="chapter-item expanded "><a href="../ch6/6.3.html"><strong aria-hidden="true">6.3.</strong> SQL (2)</a></li><li class="chapter-item expanded "><a href="../ch6/6.4.html"><strong aria-hidden="true">6.4.</strong> Accessing Databases From Java (1)</a></li><li class="chapter-item expanded "><a href="../ch6/6.5.html"><strong aria-hidden="true">6.5.</strong> Accessing Databases From Java (2)</a></li><li class="chapter-item expanded "><a href="../ch6/exercise.html"><strong aria-hidden="true">6.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch7/index.html"><strong aria-hidden="true">7.</strong> Thymeleaf</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch7/7.1.html"><strong aria-hidden="true">7.1.</strong> Get Started With Thymeleaf</a></li><li class="chapter-item expanded "><a href="../ch7/7.2.html"><strong aria-hidden="true">7.2.</strong> Standard Expression Syntax</a></li><li class="chapter-item expanded "><a href="../ch7/exercise.html"><strong aria-hidden="true">7.3.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch9/index.html"><strong aria-hidden="true">8.</strong> Get Started With Spring</a></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/tomcat.html"><strong aria-hidden="true">9.1.</strong> A.1 Tomcat</a></li><li class="chapter-item expanded "><a href="../appendix/idea.html"><strong aria-hidden="true">9.2.</strong> A.2 IntelliJ IDEA</a></li><li class="chapter-item expanded "><a href="../appendix/jdk.html"><strong aria-hidden="true">9.3.</strong> A.3 JDK</a></li><li class="chapter-item expanded "><a href="../appendix/gradle.html"><strong aria-hidden="true">9.4.</strong> A.4 Gradle</a></li><li class="chapter-item expanded "><a href="../appendix/sqlite.html"><strong aria-hidden="true">9.5.</strong> A.5 SQLite</a></li><li class="chapter-item expanded "><a href="../appendix/cloud.html"><strong aria-hidden="true">9.6.</strong> A.6 Cloud (1)</a></li><li class="chapter-item expanded "><a href="../appendix/cloud2.html"><strong aria-hidden="true">9.7.</strong> A.7 Cloud (2)</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Head First Java Web</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="31-servlet-from-birth-to-death"><a class="header" href="#31-servlet-from-birth-to-death">3.1 Servlet: from Birth to Death</a></h1>
<p>In Chapter 2, we looked at the Container's overall role in a servlet's life: it creates the request and response objects, creates or allocates a new thread for the servlet, and calls the servlet's <code>service()</code> method, passing the request and response references as arguments. Please review the whole process in <a href="ch2/2.1">Section 2.1</a>. </p>
<p>Note that we previously mentioned &quot;the container calls the servlet's <code>doGet()</code>&quot;, but technically, it calls <code>service()</code> instead. </p>
<blockquote>
<p>void	service(HttpServletRequest req, HttpServletResponse resp)	
Receives standard HTTP requests from the public service method and dispatches them to the <em>doMethod</em> methods defined in this class.</p>
</blockquote>
<p>As there are several HTTP methods (e.g., GET, PUT, DELETE), <code>service()</code> can dispatch the received request to the matches <code>doXXX()</code>, and such API design provides extra flexibility.</p>
<p>In what follows, we need to investigate several questions with respect to a servlet's life:</p>
<ul>
<li><em>when was the servlet class loaded?</em> </li>
<li><em>when did the servlet's constructor run?</em></li>
<li><em>when should your servlet initialize resources?</em> </li>
<li><em>when should it clean up its resources?</em></li>
</ul>
<p>Those questions may look trivial at first, but solving them is of importance when developing some critical web applications.</p>
<h2 id="servlet-lifecycle"><a class="header" href="#servlet-lifecycle">Servlet lifecycle</a></h2>
<p>The servlet lifecycle is simple; there's only one main state: <strong>initialized</strong>. When it is <em>initialized</em>, it is able to handle requests through <code>service()</code>. If the servlet is not <em>initialized</em>, then it is either <em>being initialized</em>, <em>being destroyed</em>, or it simply <strong>does not exist</strong>.</p>
<p><img src="image/ch3-life.png" alt="Figure 3.1 Servlet lifecycle." title=":size=30%" /></p>
<blockquote>
<p>[!NOTE]
<code>init()</code> is NOT constructor. See more at <a href="https://stackoverflow.com/questions/9381356/">Why we use init() rather Constructor</a>.</p>
</blockquote>
<p>In Java, an object is usually crated through its <em>constructor</em>, such as <code>String s = new String()</code>. Then should we write a constructor for our self-defined servlet (e.g., <code>HelloServlet.java</code>)? Then answer is <em>NO</em>, because the container would use the complier supplied default constructor which is no-argument[1]. After that, the <code>init()</code> method is called to initialize some resources required by the servlet. When finished, the servlet is <em>initialized</em>, and this is where the servlet spend most of its life. Also, the container gives the servlet to clean up using <code>destroy()</code> before the servlet is killed (i.e., made ready for garbage collection).</p>
<p>Note that both <code>init()</code> and <code>destroy()</code> are called only once throughout a servlet's life. In <code>HelloServlet.java</code>, we already saw the usage of <code>init()</code>, and it simply initialized a <em>String</em> object.</p>
<pre><code class="language-java">private String message;

public void init() {
    message = &quot;Hello World!&quot;;
}
</code></pre>
<p>We can design a small test to verify that <code>init()</code> is called only once: we add an unassigned <code>int</code> member variable in a servlet, increment it by one in <code>init()</code>, and them display this variable in <code>doGet()</code>. You will notice that no matter how many times this servlet is accessed, the value of variable remains <em>1</em>. The detailed implementation leaves for an exercise.</p>
<p>So, when do we need to initialize something for a servlet? It could be a little abstract without detailed scenarios. For example, the database connection is required to query a database, and code of <em>opening</em> the connection object can be put inside <code>init()</code>. Similarly, in case of resource leak, <em>closing</em> the connection object can be in <code>destroy()</code>[2].</p>
<p>Like <code>doGet()</code> and <code>doPost()</code>, your servlet inherits those lifecycle methods from parent classes or interfaces. And Fig 3.2 shows some essential inherited methods from a bird's-eye view, and it is also a verbose version of Fig 2.4[3]. </p>
<blockquote>
<p>[!NOTE]
Do not try to memorize all fo these methods! Just get a feel for how the API works.</p>
</blockquote>
<p><img src="image/ch3-uml.png" alt="Figure 3.2 Servlet's methods." title=":size=70%" /></p>
<ul>
<li><strong>Servlet interface</strong>: It says that all servlets have these five methods, and the three in bold are lifecycle method.</li>
<li><strong>GenericServlet class</strong>: It is an abstract class where most of your servlet's &quot;servlet behavior&quot; comes from.</li>
<li><strong>HttpServlet class</strong>: It is also an abstract class implements the <code>service()</code> method to deal with HTTP related issues.</li>
</ul>
<p>Do not get depressed when you see too many inherited methods because in most (more than 99.999%) cases, you need only to override <code>doGet()</code> and/or <code>doPost()</code> for your own servlet. And this is the method responsible for your web application is supposed to do.</p>
<h2 id="servlet-and-thread"><a class="header" href="#servlet-and-thread">Servlet and thread</a></h2>
<p>Before we move on, we have to introduce the background of <code>thread</code>, an importance concept in operating systems. </p>
<blockquote>
<p>Process means any program is in execution. Thread means segment of a process.</p>
</blockquote>
<p>A single Java program, like a servlet, is a process. A thread is like a virtual CPU that can execute your Java code - inside your Java application. For example, in a downloading program, it may contain several <em>threads</em> to fetch the data from the server concurrently to achieve a higher speed. In Java, there is at least one thread, <em>main thread</em> that every Java application has.</p>
<p>To demonstrate the current execution, we design a multi-threads program in the following[4]:</p>
<pre><code class="language-java">class Servlet {
    public void service() throws InterruptedException {
        System.out.println(&quot;start to service...&quot;);
        for (int i = 0; i &lt; 10; i++) {
            System.out.println(i);
            Thread.sleep(500);
        }
        System.out.println(&quot;end of service...&quot;);
    }
}
</code></pre>
<p>The <code>Servlet</code> class is used to mimic a servlet, and it has a <code>service()</code> method to output values from 1 to 10. Note the <code>Thread.sleep(500)</code> is used to cause the currently executing thread to sleep for 500 milliseconds, and this is to mimic a consuming task in a servlet.</p>
<pre><code class="language-java">class Container implements Runnable {
    private final Servlet servlet;
    public Container() {
        servlet = new Servlet();
    }
    @Override
    public void run() {
        try {
            servlet.service();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>The <code>Container</code> class is used to mimic the container, and for simplicity, we add a <code>Servlet</code> as its member variable. <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html">Runnable</a> is an interface that is to be implemented by a class whose instances are intended to be executed by a thread. When an object implementing interface <code>Runnable</code> is used to create a thread, starting the thread causes the object's <code>run()</code> method to be called in that separately executing thread.</p>
<pre><code class="language-java">public class Main {
    public static void main(String[] args) {
        Container container = new Container();
        Thread t1 = new Thread(container);
        Thread t2 = new Thread(container);
        t1.start();
        t2.start();
    }
}
</code></pre>
<p>In the <code>main()</code> method, we firstly crate a <code>Container</code> instance, and therefore, a <code>Servlet</code> instance, and then start two threads to <code>service()</code>. As you expected, the output from 1 to 10 of the two threads are concurrently executed. It is worthwhile to observe the output on your own, and it is left as an exercise for the reader.</p>
<p>Now it is time for <em>REAL</em> servlets: suppose <code>HelloServlet</code> is accessed by two people at the same time, then how many <code>HelloServlet</code> instances are there in the server? Will the container create <em>TWO</em> servlet objects? In general, there are not multiple instances of any servlet. If so, how can the container guarantee that the two requests won't affect each other? For example, in the book-selling website, there is a <code>Checkout</code> servlet. The system shall make sure that Bob won't pay for what Alice bought.</p>
<p>To achieve this goal, <strong>the container runs multiple threads to process multiple requests to a single servlet</strong>. Therefore, every client request generates a new pair of request and response objects, and they shall not affect each other.</p>
<p><img src="image/ch3-thread.png" alt="Figure 3.3 Servlet and thread." title=":size=70%" /></p>
<hr />
<p>[1] Technically, the container would load the class (i.e., <em>bytecode</em>) of the servlet at the run time, and then use the technology called <em>reflection</em> to find and call its no-argument constructor.</p>
<p>[2] Don't worry if you have some troubles in understanding this example, and we will illustrate it using real code in the later of this book.</p>
<p>[3] Some readers may cannot get the point why interfaces and abstract classes are introduced here. It is a matter of design choice, and such <em>interface</em>-first design is very common is object oriented programming.</p>
<p>[4] Note that the code here is only used to demonstrate the usage of <em>thread</em>, and it is <em>NOT</em> how the container is implemented.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ch3/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../ch3/3.2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ch3/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../ch3/3.2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
