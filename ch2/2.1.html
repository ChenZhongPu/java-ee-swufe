<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Servlet And Container - Head First Java Web</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../preface.html">Preface</a></li><li class="chapter-item expanded "><a href="../ch1/index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch1/1.1.html"><strong aria-hidden="true">1.1.</strong> Jakarta EE Overview</a></li><li class="chapter-item expanded "><a href="../ch1/1.2.html"><strong aria-hidden="true">1.2.</strong> Your First Java Web Project</a></li><li class="chapter-item expanded "><a href="../ch1/1.3.html"><strong aria-hidden="true">1.3.</strong> A Brief Introduction To HTML</a></li><li class="chapter-item expanded "><a href="../ch1/1.4.html"><strong aria-hidden="true">1.4.</strong> A Brief Introduction To HTTP</a></li><li class="chapter-item expanded "><a href="../ch1/1.5.html"><strong aria-hidden="true">1.5.</strong> Revisit The First Java Web Project</a></li><li class="chapter-item expanded "><a href="../ch1/exercise.html"><strong aria-hidden="true">1.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch2/index.html"><strong aria-hidden="true">2.</strong> Web App Architecture And Mini MVC</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch2/2.1.html" class="active"><strong aria-hidden="true">2.1.</strong> Servlet And Container</a></li><li class="chapter-item expanded "><a href="../ch2/2.2.html"><strong aria-hidden="true">2.2.</strong> Search: The Way To Self-learning</a></li><li class="chapter-item expanded "><a href="../ch2/2.3.html"><strong aria-hidden="true">2.3.</strong> A Brief Introduction To MVC</a></li><li class="chapter-item expanded "><a href="../ch2/2.4.html"><strong aria-hidden="true">2.4.</strong> Hands On MVC (1)</a></li><li class="chapter-item expanded "><a href="../ch2/2.5.html"><strong aria-hidden="true">2.5.</strong> Hands on MVC (2)</a></li><li class="chapter-item expanded "><a href="../ch2/exercise.html"><strong aria-hidden="true">2.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch3/index.html"><strong aria-hidden="true">3.</strong> In-depth Servlet</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch3/3.1.html"><strong aria-hidden="true">3.1.</strong> Servlet: From Birth To Death</a></li><li class="chapter-item expanded "><a href="../ch3/3.2.html"><strong aria-hidden="true">3.2.</strong> Request And Response</a></li><li class="chapter-item expanded "><a href="../ch3/3.3.html"><strong aria-hidden="true">3.3.</strong> More About Request</a></li><li class="chapter-item expanded "><a href="../ch3/3.4.html"><strong aria-hidden="true">3.4.</strong> Upload Files In Servlets</a></li><li class="chapter-item expanded "><a href="../ch3/3.5.html"><strong aria-hidden="true">3.5.</strong> More About Response (1)</a></li><li class="chapter-item expanded "><a href="../ch3/3.6.html"><strong aria-hidden="true">3.6.</strong> More About Response (2)</a></li><li class="chapter-item expanded "><a href="../ch3/exercise.html"><strong aria-hidden="true">3.7.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch4/index.html"><strong aria-hidden="true">4.</strong> In-depth Web</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch4/4.1.html"><strong aria-hidden="true">4.1.</strong> Init parameters</a></li><li class="chapter-item expanded "><a href="../ch4/4.2.html"><strong aria-hidden="true">4.2.</strong> Attributes</a></li><li class="chapter-item expanded "><a href="../ch4/4.3.html"><strong aria-hidden="true">4.3.</strong> Session Management (1)</a></li><li class="chapter-item expanded "><a href="../ch4/4.4.html"><strong aria-hidden="true">4.4.</strong> Session Management (2)</a></li><li class="chapter-item expanded "><a href="../ch4/exercise.html"><strong aria-hidden="true">4.5.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch5/index.html"><strong aria-hidden="true">5.</strong> JSP And Scriptless JSP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch5/5.1.html"><strong aria-hidden="true">5.1.</strong> Facts About JSP</a></li><li class="chapter-item expanded "><a href="../ch5/5.2.html"><strong aria-hidden="true">5.2.</strong> Expression Language</a></li><li class="chapter-item expanded "><a href="../ch5/5.3.html"><strong aria-hidden="true">5.3.</strong> JSTL</a></li><li class="chapter-item expanded "><a href="../ch5/exercise.html"><strong aria-hidden="true">5.4.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch6/index.html"><strong aria-hidden="true">6.</strong> Database</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch6/6.1.html"><strong aria-hidden="true">6.1.</strong> Introduction To Database</a></li><li class="chapter-item expanded "><a href="../ch6/6.2.html"><strong aria-hidden="true">6.2.</strong> SQL (1)</a></li><li class="chapter-item expanded "><a href="../ch6/6.3.html"><strong aria-hidden="true">6.3.</strong> SQL (2)</a></li><li class="chapter-item expanded "><a href="../ch6/6.4.html"><strong aria-hidden="true">6.4.</strong> Accessing Databases From Java (1)</a></li><li class="chapter-item expanded "><a href="../ch6/6.5.html"><strong aria-hidden="true">6.5.</strong> Accessing Databases From Java (2)</a></li><li class="chapter-item expanded "><a href="../ch6/exercise.html"><strong aria-hidden="true">6.6.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch7/index.html"><strong aria-hidden="true">7.</strong> Thymeleaf</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ch7/7.1.html"><strong aria-hidden="true">7.1.</strong> Get Started With Thymeleaf</a></li><li class="chapter-item expanded "><a href="../ch7/7.2.html"><strong aria-hidden="true">7.2.</strong> Standard Expression Syntax</a></li><li class="chapter-item expanded "><a href="../ch7/exercise.html"><strong aria-hidden="true">7.3.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><a href="../ch9/index.html"><strong aria-hidden="true">8.</strong> Get Started With Spring</a></li><li class="chapter-item expanded "><a href="../appendix/index.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../appendix/tomcat.html"><strong aria-hidden="true">9.1.</strong> A.1 Tomcat</a></li><li class="chapter-item expanded "><a href="../appendix/idea.html"><strong aria-hidden="true">9.2.</strong> A.2 IntelliJ IDEA</a></li><li class="chapter-item expanded "><a href="../appendix/jdk.html"><strong aria-hidden="true">9.3.</strong> A.3 JDK</a></li><li class="chapter-item expanded "><a href="../appendix/gradle.html"><strong aria-hidden="true">9.4.</strong> A.4 Gradle</a></li><li class="chapter-item expanded "><a href="../appendix/sqlite.html"><strong aria-hidden="true">9.5.</strong> A.5 SQLite</a></li><li class="chapter-item expanded "><a href="../appendix/cloud.html"><strong aria-hidden="true">9.6.</strong> A.6 Cloud (1)</a></li><li class="chapter-item expanded "><a href="../appendix/cloud2.html"><strong aria-hidden="true">9.7.</strong> A.7 Cloud (2)</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Head First Java Web</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="21-servlet-and-container"><a class="header" href="#21-servlet-and-container">2.1 Servlet And Container</a></h1>
<p>What if you had Java, but no servlets or containers? Well, you can still use Java SE to handle the HTTP request. But, it would require overwhelming efforts. Basically, some key functions you would have to implement in plain old Java on your own if no container existed:</p>
<ul>
<li>Create a socket connection with the server, and create a listener for the socket.</li>
<li>Create a thread manager.</li>
<li>Implement security.</li>
<li>Convent a JSP to a Servlet.</li>
<li>...</li>
</ul>
<p>Thanks to the container. You get to concentrate more on your own business logic instead of worrying about writing code for threading, security, and networking. </p>
<blockquote>
<p>[!TIP]
Tomcat is the <em>container</em> we are using in the textbook.</p>
</blockquote>
<h2 id="how-the-container-handles-a-request"><a class="header" href="#how-the-container-handles-a-request">How the container handles a request</a></h2>
<p>As you have already known, <code>String</code> is a Java class used to manage a sequence of characters; <code>Date</code> is a Java class used to provide the ability to manipulate time; <code>Math</code> is Java class used to extend the capabilities that handle mathematical operations...</p>
<p>What is <code>Servlet</code> essentially? From the point of view of code, a servlet is no exception: it is a Java class that is used to extend the capabilities of servers that host applications accessed by means of a request-response programming model. </p>
<blockquote>
<p>[!TIP]
A servlet is a small Java program that runs within a Web server[1].</p>
</blockquote>
<pre><code class="language-java">public class HelloServlet extends HttpServlet {
    ...
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        ...
    }
}
</code></pre>
<p>Let's take a closer look at the <code>HelloServlet.java</code>. As the name implies, the <code>doGet()</code> method is to handle the HTTP GET request and then make a response. In the plain old Java code, there must another Java class to create an instance of <code>HelloServlet</code>, <code>HttpServletRequest</code> and <code>HttpServletResponse</code>. Without any doubt, it is the container's responsibility. The pseudo code[2] can be described as following:</p>
<pre><code class="language-java">// what happens in the container
HelloServlet servlet = new HelloServlet();
HttpServletRequest request = new HttpServletRequest();
HttpServletResponse response = new HttpServletResponse();
servlet.doGet(request, response);
</code></pre>
<p>Here's a quick overview about how the container handles a request, and it illustrates what happens behind the scene of Fig.1.12. We assume that the request is an HTTP GET.</p>
<ul>
<li><strong>Step 1</strong>: User clicks a link that has a URL to a servlet instead of a static page. The clicking behavior would generate an HTTP request sent to the container.</li>
</ul>
<p><img src="image/ch2-container-1.png" alt="Figure 2.1 Step 1: User sends a request." title=":size=70%" /></p>
<ul>
<li><strong>Step 2</strong>: The container &quot;sees&quot; that the request is for a servlet, so the container creates two objects: 1) HttpServletResponse and 2) HttpServletRequest.</li>
</ul>
<p><img src="image/ch2-container-2.png" alt="Figure 2.2 Step 2: Container creates request and response." title=":size=70%" /></p>
<ul>
<li><strong>Step 3</strong>: The container finds the correct servlet based on the URL in the request, creates or allocates a thread for that request, and passes the request and response objects to the servlet thread[3]. Note that different accesses to the same servlet are isolated threads.</li>
</ul>
<blockquote>
<p>[!TIP]
We will revisit the <em>thread</em> related issues in <a href="ch3/3.1">Section 3.1</a>.</p>
</blockquote>
<p><img src="image/ch2-container-3.png" alt="Figure 2.3 Step 3: Container passes request and response to servlet thread." title=":size=70%" /></p>
<ul>
<li><strong>Step 4</strong>: The container calls the servlet's <code>doGet()</code>, which generates a dynamic page and dumps the page into the response object. Remember, the container still has a reference to the response object.</li>
</ul>
<p><img src="image/ch2-container-4.png" alt="Figure 2.3 Step 4: Container calls doGet()." title=":size=70%" /></p>
<ul>
<li><strong>Step 5</strong>: The thread completes, and the container converts the response into an HTTP response, sends it back to the client, then deletes the request and response objects[4]. </li>
</ul>
<p><img src="image/ch2-container-5.png" alt="Figure 2.3 Step 5: Container sends back HTTP response." title=":size=70%" /></p>
<h2 id="what-makes-servlet-a-servlet"><a class="header" href="#what-makes-servlet-a-servlet">What makes servlet a servlet</a></h2>
<p>Back to the servlet itself, let's revisit how it looks in code line by line (<code>ch1/HelloServlet.java</code>).</p>
<pre><code class="language-java">// lines 1-6
package com.swufe.javaee.first_java_ee;

import java.io.*;

import javax.servlet.http.*;
import javax.servlet.annotation.*;
</code></pre>
<p>Every Java programmer should know what <code>package</code> and <code>import</code> are: <code>package</code> is to organize Java files into different modules or folders in your file systems, and importing a package allows you to access classes in the package in current Java file. Here <code>java.io.*</code> is the package of Java SE (under <code>java</code> namespace), while the remaining two belong to Jakarta EE (under <code>jakarta</code> namespace).</p>
<blockquote>
<p>[!NOTE]
In Java EE 8 or below, the namespace is <code>javax</code>, and it has been changed to <code>jakarta</code> since Jakarta EE 8.</p>
</blockquote>
<p>We leave the explanation of line 8 for the next subsection <strong>How the container finds the correct servlet</strong>.</p>
<pre><code class="language-java">// line 9
public class HelloServlet extends HttpServlet {
</code></pre>
<p>Here we have a Java class named <code>HelloServlet</code> extending <code>jakarta.servlet.http.HttpServlet</code>, so this self-defined class can reuse many methods as well fields from <code>HttpServlet</code>. As we mentioned above, the main purpose of a servlet is to handle requests and then make responses. Although there are other alternative communication protocols (e.g., FTP, SMTP), Jakarta EE only provides supports for HTTP(S) which are the most widely used in web era. As its name implies, <code>HttpServlet</code> is to used to create an HTTP servlet suitable for a Web site.</p>
<blockquote>
<p>[!NOTE]
99.999% of all servlets are HttpServlets.</p>
</blockquote>
<p>What about the next 0.001%? Well, in rare cases, you can even implement your own servlet to handle other network protocols in addition to HTTP(S). The following is a simple UML class diagram[5] to illustrate the servlet families.</p>
<p><img src="image/ch2-uml.png" alt="Figure 2.4 Servlet class diagram." title=":size=55%" /></p>
<p>As we can see, <code>Servlet</code> is an interface, and <code>GenericServlet</code>, an abstract class, is protocol-independent servlet. Implementation in UML is a hollow triangle shape on the interface end of the <em>dashed</em> line (----â–»). <code>HttpServlet</code> is also an abstract class extending <code>GenericServlet</code>. Inheritance in UML is a hollow triangle shape on the superclass end of the line. It is important to understand the class diagram in a system if you want to have a quick overview in a high level.</p>
<pre><code class="language-java">// lines 16-24
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException { // 16
    response.setContentType(&quot;text/html&quot;); // 17
    String message = &quot;Hello World!&quot;; // 18
    // Hello
    PrintWriter out = response.getWriter(); // 20
    out.println(&quot;&lt;html&gt;&lt;body&gt;&quot;); // 21
    out.println(&quot;&lt;h1&gt;&quot; + message + &quot;&lt;/h1&gt;&quot;); // 22
    out.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;); // 23
}
</code></pre>
<p>Slightly different from <code>HelloServlet.java</code>, we move the <code>message</code> variable into <code>doGet()</code> for the ease of explanation. First of all, <code>doGet()</code> is inherited from <code>HttpServlet</code> class, and it is used to handle HTTP GET method. To put it in another way, it is a method overriding, and to make it explicit, it is recommended to add <code>@Override</code> annotation before the method signature. As we discussed before, both <code>request</code> and <code>response</code> are created by the container, and they are interfaces to provide request and response information for HTTP servlets, respectively.</p>
<ul>
<li>Line 17: <code>setContentType()</code> is a method of <code>HttpServletResponse</code>, specifying the content-type, a.k.a MIME type of a response. You may refer to <a href="ch1/1.4.html">Section 1.4</a> if you are lost.</li>
<li>Line 19: Generally speaking, there are two kinds of data types, character text (e.g., <code>.html</code>, <code>.txt</code>) and non-plain text (e.g., <code>.jar</code>, <code>.png</code>), respectively, and <code>getWrite()</code> method of a response returns a <code>PrinterWriter</code> object that can send <strong>character text</strong> to the client.</li>
<li>Lines 21-22: Write some HTML elements into the <code>PrinterWriter</code>. Different from <code>System.out.println()</code>, which is to display some texts into the standard output[7], <code>println()</code> of <code>java.io.PrinterWriter</code> is to display texts into a a text-output stream[8], and you can simply image that a response object wraps a text stream.</li>
</ul>
<p><img src="image/ch2-response-writer.png" alt="Figure 2.5 Response and PrinterWriter." title=":size=60%" /></p>
<p>After <code>doGet()</code> is called, the container will convert this response object wrapped with contents into a real HTTP response and send it back to the client (i.e., a web browser in our case).</p>
<h2 id="how-the-container-finds-the-correct-servlet"><a class="header" href="#how-the-container-finds-the-correct-servlet">How the container finds the correct servlet</a></h2>
<p>In a real system, there is a large number of servlets. So, a natural question is: how does the container the correct servlet? </p>
<p>Consider you are writing a letter to your friend Bob, which information can help postman deliver your letter to Bob? Well, you may asked to write down Bob's address and name in the envelope. Similarly, the container also needs each servlet's &quot;address&quot; and &quot;name&quot;. Recall in the Step 3 of <strong>How the container handles a request</strong>:</p>
<blockquote>
<p>The container finds the correct servlet based on the URL in the request.</p>
</blockquote>
<p>The &quot;address&quot; (or &quot;name&quot;) of a servlet corresponds to the resource name in a URL that people input in the address bar of a web browser.</p>
<p><img src="image/ch2-url.png" alt="Figure 2.6 URL anatomy." title=":size=70%" /></p>
<p>In the last subsection, we omit line 8 of <code>HelloServlet.java</code> on purpose.</p>
<pre><code class="language-java">// line 8
@WebServlet(name = &quot;helloServlet&quot;, value = &quot;/hello-servlet&quot;)
</code></pre>
<p>It is a Java annotation introduced by Jakarta EE, which make it possible to map URLs to servlets[9], and it must be located before the class declaration. The key component of this annotation is <code>value = &quot;/hello-servlet&quot;</code>, implying the resource named <code>hello-servlet</code> will be routed to this servlet, while <code>name = &quot;helloServlet</code> is optional, and it does not really make sense in this example. You can also use <code>urlPatterns</code> to specify such mapping:</p>
<pre><code class="language-java">@WebServlet(urlPatterns = &quot;/hello-servlet&quot;)
</code></pre>
<blockquote>
<p>[!TIP]
Both <code>value</code> and <code>urlPatterns</code> in <code>@WebServlet</code> can map URLs, and <code>urlPatterns</code> is more powerful. More rules and usages will be covered later in this book.</p>
</blockquote>
<p>It is also fine to map several URLs to this servlet by specifying a list of values in <code>value</code> or <code>urlPatterns</code>.</p>
<pre><code class="language-java">@WebServlet(urlPatterns = {&quot;/a&quot;, &quot;/b&quot;})
</code></pre>
<p>Then you can access this servlet via either <code>/a</code> or <code>/b</code>. By the way, like variable naming, you should provide meaningful values for servlet, so  Since url mapping in the most important information of a servlet, there is a shorthand:</p>
<pre><code class="language-java">@WebServlet(&quot;/c&quot;)
</code></pre>
<h2 id="once-upon-a-time-a-servlets-name"><a class="header" href="#once-upon-a-time-a-servlets-name">Once upon a time: A servlet's name</a></h2>
<p>Before Servlet API 3.0, setting up the URL mappings is a bit overwhelming, and you have to use the deployment descriptor (DD) to tell the container how to run your servlets and JSPs. DD is a fairly simple XML document (<code>src | main | webapp | WEB-INF | web.xml</code>)[10], and annotations can replace equivalent XML configuration in DD such as servlet declaration and servlet mapping.</p>
<p>First of all, let's have glance at the <code>web.xml</code>. Basically, its syntax is similar with HTML as we have studied previously. The default DD is nearly empty, except a root element <code>&lt;web-app&gt;</code>. DD provides a &quot;declarative&quot; mechanism for customizing you web applications without touching source code, and this flexibility is sometimes preferred because any changes of source code will result in extra re-compiling (i.e., converting <code>.java</code> to <code>.class</code>) and re-packaging.</p>
<p>There is no essential difference between annotation and DD in terms of servlet mapping. The main idea is the same: create a connection between a servlet and a URL. When it comes to a servlet, it is a Java class with a fully-qualified name (i.e, package name + class name). For example, <code>HelloServlet</code>'s fully-qualified class name in <code>ch2</code> is <code>com.swufe.javaee.ch2.HelloServlet</code>. Firstly, you have to map an internal name, which is optional in annotations but necessary in DD, to the fully-qualified class name using <code>&lt;servlet&gt;</code> element. Note that internal name is only visible to developers not to end users.</p>
<pre><code class="language-xml">&lt;servlet&gt;
    &lt;servlet-name&gt;Some Name&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.swufe.javaee.ch2.HelloServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;
</code></pre>
<p>As we can see, <code>&lt;servlet-name&gt;</code> and <code>&lt;servlet-class&gt;</code>, nested inside <code>&lt;servlet&gt;</code>, are used to specify the internal name and fully-qualified name, respectively.</p>
<p>Next, you also have to further map the internal name to URLs using <code>&lt;servlet-mapping&gt;</code> element. The value inside <code>&lt;servlet-name&gt;</code> is what we have defined in <code>&lt;servlet&gt;</code>, and <code>&lt;url-pattern&gt;</code> has the same functionality with the <code>value</code> or <code>urlPatterns</code> in annotations. </p>
<pre><code class="language-xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Some Name&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/hello-servlet&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>
<p>To sum up, there are <em>THREE</em> names of a servlet, and <code>servlet-name</code> is the bridge mapping the servlet to URLs:</p>
<ul>
<li><strong>servlet-name</strong>: the internal name, which is logical.</li>
<li><strong>servlet-class</strong>: the fully-qualified class name, which is physical.</li>
<li><strong>url-pattern</strong>: the URL name, which is visible to end users.</li>
</ul>
<p><img src="image/ch2-three-names.png" alt="Figure 2.6 Three names of a servlet." title=":size=80%" /></p>
<p>Clearly, annotations make our lives easier, and they are also widely used in many popular frameworks, including Java's Spring and Python's Flask, so it is recommended to use annotations if possible. </p>
<hr />
<p>[1] In linguistics, <code>-let</code> often means <em>small</em>. For example, <em>booklet</em> is a small book or group of page; <em>tablet</em> is a small, solid piece of medicine. So <em>servlet</em>, literally, means a small program running in the server.</p>
<p>[2] The pseudo code <em>doesn't</em> really exist in Jakarta EE, and it only serves for the illustration purpose here.</p>
<p>[3] Process means any program is in execution, and thread means segment of a process. Since the servlet may be accessed by thousands of people simultaneously, there are many threads to create servlet instances. Creating threads can be a time consuming task, so many systems would maintain a thread pool, and therefore when a new request comes, an existing thread and instance will be allocated and reused for better performance.</p>
<p>[4] All objects in Java are references, so when passing an object to a function, any changes of the object can be observed by anyone who holds a reference to that object.</p>
<p>[5] Deletions are happened in an inexplicit way, and they are under the control of Java's garbage collection.</p>
<p>[6] UML, short for Unified Model Language, is a general-purpose, developmental, modeling language in the field of software engineering that is intended to provide a standard way to visualize the design of a system. A class diagram in UML is a type of static structure diagram that describes the structure of a system by showing the system's classes, their attributes, operations (or methods), and the relationships among objects. However, the class diagram used in this textbook is a simplified version, not the standard one.</p>
<p>[7] That default destination of the standard output is the display screen on the computer that initiated the program.</p>
<p>[8] I/O and networking operations are often abstracted as <em>streams</em>. Like water flow in a stream, we often emphasize data flow in program which has a destination.</p>
<p>[9] Such mapping from URLs to codes (i.e., methods, classes) is often called <code>routing</code>.</p>
<p>[10] XML, short of Extensible Markup Language, is similar to HTML, but without predefined tags to use. Instead, you define your own tags designed specifically for your needs.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../ch2/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../ch2/2.2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../ch2/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../ch2/2.2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
